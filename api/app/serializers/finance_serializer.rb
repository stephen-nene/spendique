class FinanceSerializer < ActiveModel::Serializer
  attributes :id, :title, :transaction_cost, :description, :transaction_type, :amount, :recurring
  has_one :user,  if: :include_associations?
  has_many :categories, if: :include_associations?

  def include_associations?
    instance_options[:include_associations]
  end
  def user

    return unless object.user
    {
      id: object.user.id,
      username: object.user.username,
      email: object.user.email,
    }
  end

  def categories
    object.categories.map do |category|
      {
        id: category.id,
        name: category.name,
      }
    end
  end

end
